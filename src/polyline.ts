import FeatureData from './feature'

import type { Coordinates, Offset } from 'types/feature'
import type { PolylineParamsMap, PolylineStyle } from 'types/polyline'

/** 线数据 */
export default class PolylineData<T extends PolylineStyle> extends FeatureData {
  /**
   * - [longitude, latitude, altitude][]
   * - 若未指定 altitude 值，则取默认值 0。
   * - 当未指定 altitude 值时，建议将参数 isHeightBasedSurface 设置为 true，并结合参数 offset 使用
   */
  declare Coordinates: Coordinates[]
  /**
   * - 指示 Feature 生成时，其高度是否基于场景上表面
   * - 若为 true，则高度为各点平面坐标处与场景上表面的交点加上 offset 参数的 z 值
   */
  declare IsHeightBasedSurface: boolean
  /**
   * - 指示 Polyline 生成时，两点之间的连线是否沿着于地表
   * - 若为 true，且 IsHeightBasedSurface 为 true，生成的线将以 offset 参数的 z 值高度紧贴地表
   * - 插值间隔在 params 参数中的 InterpolationDistance 设置，默认为 1 米
   */
  declare IsTraceSurface: boolean
  /**
   * - [x, y, z]
   * - 基于坐标的偏移量（米）
   * - 其中 z 值代表绘制的平面所处高度
   */
  declare Offset: Offset
  /** 'Arrow01' | 'Custom' | 'Dash01' | 'Gradient01' | 'OD01' | 'OD02' | 'Solid01 */
  declare Style: T

  /**
   * Polyline Data Constructor
   * - 若 coordinates 未指定 altitude 值，则取默认值 0。
   * - 当 coordinates 未指定 altitude 值时，建议将参数 isHeightBasedSurface 设置为 true，并结合参数 offset 使用
   * - 若 isHeightBasedSurface 为 true，则高度为各点平面坐标处与场景上表面的交点加上 offset 参数的 z 值
   * - 若 isTraceSurface 为 true，且 IsHeightBasedSurface 为 true，生成的线将以 offset 参数的 z 值高度紧贴地表，插值间隔在 params 参数中的 InterpolationDistance 设置，默认为 1 米
   * @param style POI 点样式
   * @param id
   * @param name
   * @param tag
   * @param coordinates [ longitude, latitude, altitude ]
   * @param offset [x, y, z] 基于坐标的偏移量（米），其中 z 值代表绘制的平面所处高度
   * @param isHeightBasedSurface 指示 Feature 生成时，其高度是否基于场景上表面
   * @param isTraceSurface 指示 Polyline 生成时，两点之间的连线是否沿着于地表
   * @param params 其他参数
   */
  constructor(
    /** Polyline 点样式 */
    style: T,
    id: string,
    name: string,
    tag: string,
    coordinates: Coordinates[],
    offset: Offset,
    isHeightBasedSurface: boolean,
    isTraceSurface: boolean,
    /** 其他参数 */
    params: PolylineParamsMap[T]
  ) {
    super(style, id, name, tag, params)
    this.Coordinates = coordinates
    this.IsHeightBasedSurface = isHeightBasedSurface
    this.IsTraceSurface = isTraceSurface
    this.Offset = offset
  }
}

export { PolylineData }
